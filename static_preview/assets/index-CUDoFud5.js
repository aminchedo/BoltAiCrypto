import{c as v,r as g,R as le,j as e,a as $,D as ie,f as B,h as re,Z as ce,i as de,k as me,A as xe,S as he,l as ue,m as E,n as W,u as fe,o as be,p as pe,E as ge,q as K}from"./index-Bh3vECew.js";import{L as ye,F as J}from"./layers-DVVmr9WL.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=v("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=v("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=v("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=v("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=v("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=v("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=v("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=v("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=v("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=v("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=v("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=v("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=v("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=v("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=v("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=v("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=v("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=v("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=v("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=v("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=v("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=v("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=v("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=v("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=v("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=v("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=v("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=v("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),I=43200,ee=1440,te=Symbol.for("constructDateFrom");function V(s,l){return typeof s=="function"?s(l):s&&typeof s=="object"&&te in s?s[te](l):s instanceof Date?new s.constructor(l):new Date(l)}function A(s,l){return V(s,s)}let Oe={};function He(){return Oe}function se(s){const l=A(s),t=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));return t.setUTCFullYear(l.getFullYear()),+s-+t}function q(s,...l){const t=V.bind(null,s||l.find(a=>typeof a=="object"));return l.map(t)}function R(s,l){const t=+A(s)-+A(l);return t<0?-1:t>0?1:t}function ze(s){return V(s,Date.now())}function Be(s,l,t){const[a,n]=q(t==null?void 0:t.in,s,l),i=a.getFullYear()-n.getFullYear(),c=a.getMonth()-n.getMonth();return i*12+c}function We(s){return l=>{const a=(s?Math[s]:Math.trunc)(l);return a===0?0:a}}function Ve(s,l){return+A(s)-+A(l)}function qe(s,l){const t=A(s);return t.setHours(23,59,59,999),t}function Xe(s,l){const t=A(s),a=t.getMonth();return t.setFullYear(t.getFullYear(),a+1,0),t.setHours(23,59,59,999),t}function Ke(s,l){const t=A(s);return+qe(t)==+Xe(t)}function Je(s,l,t){const[a,n,i]=q(t==null?void 0:t.in,s,s,l),c=R(n,i),r=Math.abs(Be(n,i));if(r<1)return 0;n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-c*r);let h=R(n,i)===-c;Ke(a)&&r===1&&R(a,i)===1&&(h=!1);const o=c*(r-+h);return o===0?0:o}function Ye(s,l,t){const a=Ve(s,l)/1e3;return We(t==null?void 0:t.roundingMethod)(a)}const Qe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ge=(s,l,t)=>{let a;const n=Qe[s];return typeof n=="string"?a=n:l===1?a=n.one:a=n.other.replace("{{count}}",l.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+a:a+" ago":a};function H(s){return(l={})=>{const t=l.width?String(l.width):s.defaultWidth;return s.formats[t]||s.formats[s.defaultWidth]}}const Ze={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},et={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tt={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},st={date:H({formats:Ze,defaultWidth:"full"}),time:H({formats:et,defaultWidth:"full"}),dateTime:H({formats:tt,defaultWidth:"full"})},at={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lt=(s,l,t,a)=>at[s];function L(s){return(l,t)=>{const a=t!=null&&t.context?String(t.context):"standalone";let n;if(a==="formatting"&&s.formattingValues){const c=s.defaultFormattingWidth||s.defaultWidth,r=t!=null&&t.width?String(t.width):c;n=s.formattingValues[r]||s.formattingValues[c]}else{const c=s.defaultWidth,r=t!=null&&t.width?String(t.width):s.defaultWidth;n=s.values[r]||s.values[c]}const i=s.argumentCallback?s.argumentCallback(l):l;return n[i]}}const rt={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},nt={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ot={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},it={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ct={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dt={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mt=(s,l)=>{const t=Number(s),a=t%100;if(a>20||a<10)switch(a%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},xt={ordinalNumber:mt,era:L({values:rt,defaultWidth:"wide"}),quarter:L({values:nt,defaultWidth:"wide",argumentCallback:s=>s-1}),month:L({values:ot,defaultWidth:"wide"}),day:L({values:it,defaultWidth:"wide"}),dayPeriod:L({values:ct,defaultWidth:"wide",formattingValues:dt,defaultFormattingWidth:"wide"})};function _(s){return(l,t={})=>{const a=t.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=l.match(n);if(!i)return null;const c=i[0],r=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],h=Array.isArray(r)?ut(r,m=>m.test(c)):ht(r,m=>m.test(c));let o;o=s.valueCallback?s.valueCallback(h):h,o=t.valueCallback?t.valueCallback(o):o;const d=l.slice(c.length);return{value:o,rest:d}}}function ht(s,l){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&l(s[t]))return t}function ut(s,l){for(let t=0;t<s.length;t++)if(l(s[t]))return t}function ft(s){return(l,t={})=>{const a=l.match(s.matchPattern);if(!a)return null;const n=a[0],i=l.match(s.parsePattern);if(!i)return null;let c=s.valueCallback?s.valueCallback(i[0]):i[0];c=t.valueCallback?t.valueCallback(c):c;const r=l.slice(n.length);return{value:c,rest:r}}}const bt=/^(\d+)(th|st|nd|rd)?/i,pt=/\d+/i,gt={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yt={any:[/^b/i,/^(a|c)/i]},jt={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vt={any:[/1/i,/2/i,/3/i,/4/i]},Nt={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},wt={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kt={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},St={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ct={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Mt={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Dt={ordinalNumber:ft({matchPattern:bt,parsePattern:pt,valueCallback:s=>parseInt(s,10)}),era:_({matchPatterns:gt,defaultMatchWidth:"wide",parsePatterns:yt,defaultParseWidth:"any"}),quarter:_({matchPatterns:jt,defaultMatchWidth:"wide",parsePatterns:vt,defaultParseWidth:"any",valueCallback:s=>s+1}),month:_({matchPatterns:Nt,defaultMatchWidth:"wide",parsePatterns:wt,defaultParseWidth:"any"}),day:_({matchPatterns:kt,defaultMatchWidth:"wide",parsePatterns:St,defaultParseWidth:"any"}),dayPeriod:_({matchPatterns:Ct,defaultMatchWidth:"any",parsePatterns:Mt,defaultParseWidth:"any"})},Tt={code:"en-US",formatDistance:Ge,formatLong:st,formatRelative:lt,localize:xt,match:Dt,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ft(s,l,t){const a=He(),n=(t==null?void 0:t.locale)??a.locale??Tt,i=2520,c=R(s,l);if(isNaN(c))throw new RangeError("Invalid time value");const r=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:c}),[h,o]=q(t==null?void 0:t.in,...c>0?[l,s]:[s,l]),d=Ye(o,h),m=(se(o)-se(h))/1e3,x=Math.round((d-m)/60);let f;if(x<2)return t!=null&&t.includeSeconds?d<5?n.formatDistance("lessThanXSeconds",5,r):d<10?n.formatDistance("lessThanXSeconds",10,r):d<20?n.formatDistance("lessThanXSeconds",20,r):d<40?n.formatDistance("halfAMinute",0,r):d<60?n.formatDistance("lessThanXMinutes",1,r):n.formatDistance("xMinutes",1,r):x===0?n.formatDistance("lessThanXMinutes",1,r):n.formatDistance("xMinutes",x,r);if(x<45)return n.formatDistance("xMinutes",x,r);if(x<90)return n.formatDistance("aboutXHours",1,r);if(x<ee){const p=Math.round(x/60);return n.formatDistance("aboutXHours",p,r)}else{if(x<i)return n.formatDistance("xDays",1,r);if(x<I){const p=Math.round(x/ee);return n.formatDistance("xDays",p,r)}else if(x<I*2)return f=Math.round(x/I),n.formatDistance("aboutXMonths",f,r)}if(f=Je(o,h),f<12){const p=Math.round(x/I);return n.formatDistance("xMonths",p,r)}else{const p=f%12,N=Math.trunc(f/12);return p<3?n.formatDistance("aboutXYears",N,r):p<9?n.formatDistance("overXYears",N,r):n.formatDistance("almostXYears",N+1,r)}}function Ut(s,l){return Ft(s,ze(s),l)}const At=(s,l=!0)=>{g.useEffect(()=>{if(!l)return;const t=a=>{const n=a.target;if(!((n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.isContentEditable)&&!(a.ctrlKey&&a.key.toLowerCase()==="s")))for(const i of s){const c=a.key.toLowerCase()===i.key.toLowerCase(),r=i.ctrlKey===void 0||a.ctrlKey===i.ctrlKey,h=i.shiftKey===void 0||a.shiftKey===i.shiftKey,o=i.altKey===void 0||a.altKey===i.altKey;if(c&&r&&h&&o){a.preventDefault(),i.handler(a);break}}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[s,l])},Pt=[{id:"popular",label:"محبوب",icon:$,symbols:["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","ADAUSDT"]},{id:"defi",label:"دیفای",icon:ye,symbols:["UNIUSDT","AAVEUSDT","LINKUSDT","MKRUSDT","SUSHIUSDT"]},{id:"layer1",label:"لایه ۱",icon:Fe,symbols:["BTCUSDT","ETHUSDT","SOLUSDT","AVAXUSDT","DOTUSDT"]},{id:"top10",label:"ده برتر",icon:z,symbols:["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","XRPUSDT","ADAUSDT","DOGEUSDT","TRXUSDT","MATICUSDT","LTCUSDT"]},{id:"stablecoins",label:"استیبل‌کوین",icon:ie,symbols:["BUSDUSDT","USDCUSDT","DAIUSDT"]}],Lt=({onSelectGroup:s})=>{const[l,t]=le.useState(null),a=n=>{t(n.id),s(n.symbols)};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-300",children:"🎯 فیلترهای سریع"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Pt.map(n=>{const i=n.icon,c=l===n.id;return e.jsxs("button",{onClick:()=>a(n),className:`
                inline-flex items-center gap-2 px-4 py-2 rounded-lg font-medium
                transition-all duration-200 border
                ${c?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400 shadow-lg shadow-cyan-500/20":"bg-slate-700/30 border-slate-600/30 text-slate-300 hover:bg-slate-700/50 hover:border-slate-500/50"}
              `,"aria-pressed":c,children:[e.jsx(i,{className:"w-4 h-4"}),e.jsx("span",{children:n.label}),e.jsxs("span",{className:"text-xs opacity-70",children:["(",n.symbols.length,")"]})]},n.id)})})]})},_t=({symbols:s,onChange:l,disabled:t})=>{const[a,n]=g.useState(""),[i,c]=g.useState(!1),h=["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","XRPUSDT","ADAUSDT","DOGEUSDT","MATICUSDT","DOTUSDT","LTCUSDT","AVAXUSDT","LINKUSDT","UNIUSDT","ATOMUSDT","ETCUSDT","XLMUSDT","NEARUSDT","ALGOUSDT"].filter(f=>f.toLowerCase().includes(a.toLowerCase())&&!s.includes(f)).slice(0,8),o=f=>{const p=f.trim().toUpperCase();p&&!s.includes(p)&&l([...s,p]),n(""),c(!1)},d=f=>{l(s.filter(p=>p!==f))},m=f=>{f.key==="Enter"?(f.preventDefault(),a.trim()&&o(a)):f.key==="Escape"&&c(!1)},x=f=>{n(f),c(f.length>0)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-300",children:["📊 نمادها (",s.length," انتخاب شده)"]}),s.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-900/50 rounded-lg border border-slate-700/30",children:s.map(f=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-slate-700/50 text-slate-200 rounded-lg text-sm font-medium border border-slate-600/30",children:[f,e.jsx("button",{onClick:()=>d(f),disabled:t,className:"p-0.5 hover:bg-red-500/20 rounded transition-colors disabled:opacity-50","aria-label":`حذف ${f}`,children:e.jsx(P,{className:"w-3 h-3"})})]},f))}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),e.jsx("input",{type:"text",value:a,onChange:f=>x(f.target.value),onKeyDown:m,onFocus:()=>a&&c(!0),onBlur:()=>setTimeout(()=>c(!1),200),placeholder:"نماد را تایپ کنید (مثال: BTCUSDT)",disabled:t,className:"w-full px-4 py-3 pr-10 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:border-cyan-500/50 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed"}),a&&e.jsx("button",{onClick:()=>{n(""),c(!1)},className:"absolute left-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-600/50 rounded transition-colors","aria-label":"پاک کردن",children:e.jsx(P,{className:"w-4 h-4 text-slate-400"})})]}),i&&h.length>0&&e.jsxs("div",{className:"absolute z-10 mt-2 w-full bg-slate-800 border border-slate-700 rounded-lg shadow-xl overflow-hidden",children:[e.jsx("div",{className:"p-2 text-xs text-slate-400 border-b border-slate-700",children:"پیشنهادات:"}),h.map(f=>e.jsxs("button",{onClick:()=>o(f),className:"w-full px-4 py-2 text-right hover:bg-slate-700/50 text-slate-200 transition-colors flex items-center justify-between group",children:[e.jsx("span",{className:"font-medium",children:f}),e.jsx(Le,{className:"w-4 h-4 text-cyan-400 opacity-0 group-hover:opacity-100 transition-opacity"})]},f))]})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"💡 نماد را تایپ کنید و Enter بزنید. حداقل ۱ نماد لازم است."})]})},Et=[{id:"scalp",label:"⚡ اسکالپ",timeframes:["1m","5m","15m"]},{id:"day",label:"📈 روزانه",timeframes:["15m","1h","4h"]},{id:"swing",label:"📊 سوئینگ",timeframes:["4h","1d","1w"]}],It=["1m","5m","15m","30m","1h","2h","4h","6h","12h","1d","1w"],Rt=({timeframes:s,onChange:l,disabled:t})=>{const a=i=>{if(s.includes(i)){if(s.length===1)return;l(s.filter(c=>c!==i))}else l([...s,i])},n=i=>{l(i.timeframes)};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block text-sm font-semibold text-slate-300 flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"بازه‌های زمانی (",s.length," انتخاب شده)"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Et.map(i=>e.jsx("button",{onClick:()=>n(i),disabled:t,className:"px-3 py-1.5 bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30 text-purple-300 rounded-lg text-sm font-medium hover:from-purple-500/30 hover:to-pink-500/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i.label},i.id))}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:It.map(i=>{const c=s.includes(i);return e.jsx("button",{onClick:()=>a(i),disabled:t,className:`
                px-3 py-2 rounded-lg font-semibold text-sm transition-all duration-200 border
                ${c?"bg-cyan-500/20 border-cyan-500/50 text-cyan-300 shadow-lg shadow-cyan-500/10":"bg-slate-700/30 border-slate-600/30 text-slate-400 hover:bg-slate-700/50 hover:border-slate-500/50 hover:text-slate-300"}
                ${t?"opacity-50 cursor-not-allowed":""}
              `,"aria-pressed":c,children:i},i)})}),e.jsx("p",{className:"text-xs text-slate-400",children:"💡 حداقل ۱ بازه زمانی لازم است. بازه‌های کوتاه‌تر برای معاملات سریع‌تر مناسب‌اند."})]})},$t=({filters:s,onChange:l,isExpanded:t,onToggle:a})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:a,className:"w-full flex items-center justify-between px-4 py-3 bg-slate-700/30 border border-slate-600/30 rounded-lg hover:bg-slate-700/50 transition-colors text-slate-300",children:[e.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[e.jsx(Ee,{className:"w-4 h-4"}),"فیلترهای پیشرفته"]}),t?e.jsx(ke,{className:"w-5 h-5"}):e.jsx(we,{className:"w-5 h-5"})]}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-slate-900/30 border border-slate-700/30 rounded-lg animate-in fade-in slide-in-from-top-2 duration-300",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"محدوده امتیاز"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:s.scoreMin,onChange:n=>l({scoreMin:parseFloat(n.target.value)||0}),className:"w-20 px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white text-sm focus:border-cyan-500/50 focus:outline-none"}),e.jsx("span",{className:"text-slate-400",children:"تا"}),e.jsx("input",{type:"number",min:"0",max:"1",step:"0.1",value:s.scoreMax,onChange:n=>l({scoreMax:parseFloat(n.target.value)||1}),className:"w-20 px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white text-sm focus:border-cyan-500/50 focus:outline-none"})]}),e.jsxs("p",{className:"text-xs text-slate-400",children:["فقط امتیازهای بین ",s.scoreMin," و ",s.scoreMax]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"تغییر قیمت (۲۴ ساعت)"}),e.jsxs("select",{value:s.priceChange,onChange:n=>l({priceChange:n.target.value}),className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white text-sm focus:border-cyan-500/50 focus:outline-none",children:[e.jsx("option",{value:"any",children:"همه"}),e.jsx("option",{value:"gainers",children:"صعودی (>0%)"}),e.jsx("option",{value:"losers",children:"نزولی (<0%)"}),e.jsx("option",{value:"bigmovers",children:"حرکت بزرگ (>5%)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"حداقل حجم معاملات"}),e.jsx("input",{type:"number",min:"0",step:"1000000",value:s.volumeMin,onChange:n=>l({volumeMin:parseFloat(n.target.value)||0}),placeholder:"۰ (بدون محدودیت)",className:"w-full px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white text-sm focus:border-cyan-500/50 focus:outline-none"}),e.jsx("p",{className:"text-xs text-slate-400",children:"حجم به دلار (مثلاً ۱۰۰۰۰۰۰۰ = ۱۰M)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"حداقل تعداد سیگنال فعال"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0",max:"9",value:s.signalCountMin,onChange:n=>l({signalCountMin:parseInt(n.target.value)}),className:"flex-1 accent-cyan-500"}),e.jsx("span",{className:"w-12 px-2 py-1 bg-slate-700/50 border border-slate-600/50 rounded text-center text-white text-sm font-mono",children:s.signalCountMin})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"توافق بازه‌های زمانی"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"any",label:"حداقل یکی"},{value:"majority",label:"اکثریت"},{value:"full",label:"اجماع کامل"}].map(n=>e.jsx("button",{onClick:()=>l({tfAgreement:n.value}),className:`
                    px-4 py-2 rounded-lg text-sm font-medium transition-all border
                    ${s.tfAgreement===n.value?"bg-cyan-500/20 border-cyan-500/50 text-cyan-300":"bg-slate-700/30 border-slate-600/30 text-slate-400 hover:bg-slate-700/50"}
                  `,children:n.label},n.value))})]}),e.jsx("div",{className:"md:col-span-2 flex justify-end",children:e.jsx("button",{onClick:()=>l({scoreMin:0,scoreMax:1,priceChange:"any",volumeMin:0,signalCountMin:0,tfAgreement:"any"}),className:"px-4 py-2 bg-red-500/20 border border-red-500/30 text-red-400 rounded-lg text-sm font-medium hover:bg-red-500/30 transition-colors",children:"بازنشانی فیلترها"})})]})]}),Ot=[{value:60,label:"۱ دقیقه"},{value:300,label:"۵ دقیقه"},{value:900,label:"۱۵ دقیقه"},{value:1800,label:"۳۰ دقیقه"}],Ht=({onDeepScan:s,onQuickScan:l,isScanning:t,autoRefresh:a,autoRefreshInterval:n,onAutoRefreshToggle:i})=>{const[c,r]=g.useState(n),[h,o]=g.useState(!1);g.useEffect(()=>{if(a){r(n);const m=setInterval(()=>{r(x=>x<=1?n:x-1)},1e3);return()=>clearInterval(m)}},[a,n]);const d=m=>{const x=Math.floor(m/60),f=m%60;return`${x}:${f.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("button",{onClick:s,disabled:t,className:`
          flex-1 flex items-center justify-center gap-2 px-6 py-4 rounded-xl font-bold text-lg
          transition-all duration-300 transform
          ${t?"bg-slate-600 cursor-not-allowed opacity-50":"bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 hover:shadow-2xl hover:shadow-cyan-500/40 hover:scale-[1.02] active:scale-[0.98]"}
          text-white shadow-xl
        `,children:[e.jsx(B,{className:`w-6 h-6 ${t?"animate-spin":""}`}),e.jsx("span",{children:t?"در حال اسکن عمیق...":"🔍 اسکن عمیق"})]}),e.jsxs("button",{onClick:l,disabled:t,className:`
          flex items-center justify-center gap-2 px-6 py-4 rounded-xl font-semibold
          transition-all duration-200
          ${t?"bg-slate-700 cursor-not-allowed opacity-50":"bg-slate-700/70 hover:bg-slate-700 border border-slate-600"}
          text-white
        `,children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{children:"⚡ اسکن سریع"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>o(!h),className:`
            h-full px-4 py-4 rounded-xl font-semibold transition-all duration-200 border
            ${a?"bg-emerald-500/20 border-emerald-500/50 text-emerald-400":"bg-slate-700/70 border-slate-600 text-slate-300 hover:bg-slate-700"}
            flex items-center gap-2
          `,children:[e.jsx(de,{className:`w-5 h-5 ${a?"animate-spin":""}`}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"text-xs opacity-70",children:"تازه‌سازی خودکار"}),a?e.jsx("span",{className:"text-sm font-mono",children:d(c)}):e.jsx("span",{className:"text-sm",children:"خاموش"})]})]}),h&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-10 overflow-hidden",children:[e.jsx("button",{onClick:()=>{i(!1),o(!1)},className:"w-full px-4 py-3 text-right hover:bg-slate-700/50 text-slate-300 transition-colors border-b border-slate-700",children:"❌ خاموش"}),Ot.map(m=>e.jsx("button",{onClick:()=>{i(!0,m.value),o(!1)},className:`
                  w-full px-4 py-3 text-right hover:bg-slate-700/50 transition-colors
                  ${n===m.value&&a?"text-emerald-400 bg-emerald-500/10":"text-slate-300"}
                `,children:m.label},m.value))]})]})]})},zt=({symbols:s,timeframes:l,onLoad:t})=>{const[a,n]=g.useState([]),[i,c]=g.useState(!1),[r,h]=g.useState(!1),[o,d]=g.useState(""),[m,x]=g.useState(!1);g.useEffect(()=>{const y=localStorage.getItem("scanner_presets");if(y)try{n(JSON.parse(y))}catch(w){console.error("Failed to load presets:",w)}},[]);const f=y=>{localStorage.setItem("scanner_presets",JSON.stringify(y)),n(y)},p=()=>{if(!o.trim())return;const y={id:Date.now().toString(),name:o,symbols:s,timeframes:l,isFavorite:m,createdAt:new Date().toISOString()};f([...a,y]),h(!1),d(""),x(!1)},N=y=>{confirm("آیا مطمئن هستید که می‌خواهید این پیش‌تنظیم را حذف کنید؟")&&f(a.filter(w=>w.id!==y))},j=y=>{f(a.map(w=>w.id===y?{...w,isFavorite:!w.isFavorite}:w))},k=()=>{const y=JSON.stringify(a,null,2),w=new Blob([y],{type:"application/json"}),D=URL.createObjectURL(w),U=document.createElement("a");U.href=D,U.download=`scanner-presets-${Date.now()}.json`,U.click(),URL.revokeObjectURL(D)},F=y=>{var U;const w=(U=y.target.files)==null?void 0:U[0];if(!w)return;const D=new FileReader;D.onload=u=>{var b;try{const S=JSON.parse((b=u.target)==null?void 0:b.result);Array.isArray(S)&&f([...a,...S])}catch{alert("فایل نامعتبر است")}},D.readAsText(w)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>c(!i),className:"flex items-center gap-2 px-4 py-2 bg-slate-700/70 border border-slate-600 text-slate-300 rounded-lg hover:bg-slate-700 transition-colors font-medium",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsx("span",{children:"پیش‌تنظیم‌ها"})]}),i&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-72 bg-slate-800 border border-slate-700 rounded-lg shadow-2xl z-20 overflow-hidden",children:[e.jsxs("button",{onClick:()=>{h(!0),c(!1)},className:"w-full px-4 py-3 text-right hover:bg-slate-700/50 text-slate-300 transition-colors border-b border-slate-700 flex items-center gap-2",children:[e.jsx(me,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{children:"ذخیره تنظیمات فعلی..."})]}),a.length>0&&e.jsx("div",{className:"max-h-64 overflow-y-auto border-b border-slate-700",children:a.sort((y,w)=>(w.isFavorite?1:0)-(y.isFavorite?1:0)).map(y=>e.jsx("div",{className:"px-4 py-3 hover:bg-slate-700/50 transition-colors group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("button",{onClick:()=>{t(y),c(!1)},className:"flex-1 text-right",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[y.isFavorite&&e.jsx(z,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-slate-200 font-medium",children:y.name})]}),e.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:[y.symbols.length," نماد • ",y.timeframes.length," بازه"]})]}),e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:w=>{w.stopPropagation(),j(y.id)},className:"p-1 hover:bg-slate-600 rounded",children:e.jsx(z,{className:`w-3 h-3 ${y.isFavorite?"text-yellow-400 fill-yellow-400":"text-slate-400"}`})}),e.jsx("button",{onClick:w=>{w.stopPropagation(),N(y.id)},className:"p-1 hover:bg-red-500/20 rounded",children:e.jsx(oe,{className:"w-3 h-3 text-red-400"})})]})]})},y.id))}),e.jsxs("div",{className:"p-2 flex gap-2",children:[e.jsxs("button",{onClick:k,className:"flex-1 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded text-sm flex items-center justify-center gap-1 transition-colors",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsx("span",{children:"خروجی"})]}),e.jsxs("label",{className:"flex-1 px-3 py-2 bg-slate-700/50 hover:bg-slate-700 text-slate-300 rounded text-sm flex items-center justify-center gap-1 transition-colors cursor-pointer",children:[e.jsx(Re,{className:"w-3 h-3"}),e.jsx("span",{children:"ورودی"}),e.jsx("input",{type:"file",accept:".json",onChange:F,className:"hidden"})]})]})]})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-xl shadow-2xl w-full max-w-md p-6 space-y-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"ذخیره پیش‌تنظیم جدید"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300",children:"نام پیش‌تنظیم"}),e.jsx("input",{type:"text",value:o,onChange:y=>d(y.target.value),placeholder:"مثال: معاملات روزانه",autoFocus:!0,className:"w-full px-4 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 focus:border-cyan-500/50 focus:outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"makeFavorite",checked:m,onChange:y=>x(y.target.checked),className:"w-4 h-4 accent-yellow-500"}),e.jsx("label",{htmlFor:"makeFavorite",className:"text-sm text-slate-300",children:"علامت‌گذاری به عنوان محبوب"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:p,disabled:!o.trim(),className:"flex-1 px-4 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"ذخیره"}),e.jsx("button",{onClick:()=>{h(!1),d(""),x(!1)},className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg font-medium hover:bg-slate-600 transition-colors",children:"انصراف"})]})]})})]})},Bt=({resultsCount:s,scanTime:l,viewMode:t,onViewModeChange:a,sortBy:n,onSortChange:i,directionFilter:c,onDirectionFilterChange:r,searchQuery:h,onSearchChange:o,selectedCount:d,onToggleComparison:m,showComparison:x})=>{const f=[{mode:"list",icon:Pe,label:"لیست"},{mode:"grid",icon:Ue,label:"شبکه"},{mode:"chart",icon:ve,label:"نمودار"},{mode:"heatmap",icon:Y,label:"نقشه"}],p=[{field:"score",label:"امتیاز"},{field:"symbol",label:"نماد"},{field:"change",label:"تغییر ۲۴ ساعت"},{field:"volume",label:"حجم"}],N=[{filter:"all",label:"همه",color:"slate"},{filter:"BULLISH",label:"صعودی",color:"emerald"},{filter:"BEARISH",label:"نزولی",color:"red"},{filter:"NEUTRAL",label:"خنثی",color:"slate"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-emerald-500 to-green-400 animate-pulse"}),e.jsxs("h3",{className:"text-lg font-bold text-white",children:[s," فرصت پیدا شد"]}),l&&e.jsx("span",{className:"text-xs text-slate-400",children:Ut(new Date(l),{addSuffix:!0})})]}),e.jsx("div",{className:"flex items-center gap-2 bg-slate-700/30 p-1 rounded-lg border border-slate-600/30",children:f.map(({mode:j,icon:k,label:F})=>e.jsxs("button",{onClick:()=>a(j),className:`
                flex items-center gap-2 px-4 py-2 rounded-md font-medium text-sm transition-all
                ${t===j?"bg-cyan-500/20 text-cyan-300 shadow-lg shadow-cyan-500/20":"text-slate-400 hover:text-slate-300 hover:bg-slate-700/50"}
              `,"aria-pressed":t===j,children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:F})]},j))})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 md:flex-initial",children:[e.jsx(je,{className:"w-4 h-4 text-slate-400"}),e.jsxs("select",{value:n,onChange:j=>i(j.target.value),className:"flex-1 md:w-auto px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white text-sm focus:border-cyan-500/50 focus:outline-none",children:[e.jsx("option",{value:"",disabled:!0,children:"مرتب‌سازی بر اساس"}),p.map(({field:j,label:k})=>e.jsx("option",{value:j,children:k},j))]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 md:flex-initial",children:[e.jsx(Y,{className:"w-4 h-4 text-slate-400"}),e.jsx("select",{value:c,onChange:j=>r(j.target.value),className:"flex-1 md:w-auto px-3 py-2 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white text-sm focus:border-cyan-500/50 focus:outline-none",children:N.map(({filter:j,label:k})=>e.jsx("option",{value:j,children:k},j))})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(B,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),e.jsx("input",{type:"text",value:h,onChange:j=>o(j.target.value),placeholder:"جستجوی نماد...",className:"w-full px-4 py-2 pr-10 bg-slate-700/50 border border-slate-600/50 rounded-lg text-white placeholder-slate-400 text-sm focus:border-cyan-500/50 focus:outline-none"}),h&&e.jsx("button",{onClick:()=>o(""),className:"absolute left-3 top-1/2 -translate-y-1/2 p-1 hover:bg-slate-600/50 rounded transition-colors",children:e.jsx(P,{className:"w-3 h-3 text-slate-400"})})]}),d>0&&e.jsxs("button",{onClick:m,className:`
              flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all border
              ${x?"bg-purple-500/20 border-purple-500/50 text-purple-300":"bg-slate-700/50 border-slate-600/50 text-slate-300 hover:bg-slate-700"}
            `,children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsxs("span",{children:["مقایسه (",d,")"]})]})]})]})},Wt=({results:s,selectedSymbols:l,onToggleSelection:t})=>{const a=o=>o.overall_score??o.final_score??o.score??0,n=o=>o.overall_direction??o.direction??"NEUTRAL",i=(o,d)=>o.sample_components&&o.sample_components[d]?o.sample_components[d].score??0:0,c=o=>{if(typeof o.risk_level=="number")return o.risk_level;if(typeof o.risk_level=="string"){const d=o.risk_level.toUpperCase();if(d==="LOW")return 25;if(d==="MEDIUM")return 50;if(d==="HIGH")return 75}return 50},r=o=>o.price??0,h=o=>`${(o*100).toFixed(1)}%`;return e.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:e.jsxs("table",{className:"w-full min-w-[1400px]",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700/50",children:[e.jsx("th",{className:"text-center py-4 px-2 text-slate-400 font-semibold text-xs",children:e.jsx(Z,{className:"w-4 h-4 mx-auto"})}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:"رتبه"}),e.jsx("th",{className:"text-right py-4 px-4 text-slate-400 font-semibold text-sm",children:"نماد / ارز"}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:"قیمت (USD)"}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:"موفقیت (%)"}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:"ریسک (%)"}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(xe,{className:"w-3 h-3"}),e.jsx("span",{children:"نهنگ‌ها"})]})}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(he,{className:"w-3 h-3"}),e.jsx("span",{children:"SMC"})]})}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx($e,{className:"w-3 h-3"}),e.jsx("span",{children:"الیوت"})]})}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),e.jsx("span",{children:"پرایس اکشن"})]})}),e.jsx("th",{className:"text-center py-4 px-3 text-slate-400 font-semibold text-xs",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3"}),e.jsx("span",{children:"سطوح ICT"})]})}),e.jsx("th",{className:"text-center py-4 px-4 text-slate-400 font-semibold text-sm",children:"امتیاز نهایی (%)"})]})}),e.jsx("tbody",{children:s.map((o,d)=>{const m=a(o),x=n(o),f=r(o),p=c(o),N=l.has(o.symbol),j=i(o,"whales")||i(o,"whale_activity"),k=i(o,"smc")||i(o,"smart_money"),F=i(o,"elliott")||i(o,"elliott_wave"),y=i(o,"price_action"),w=i(o,"ict")||i(o,"fibonacci");return e.jsxs("tr",{className:`
                  border-b border-slate-800/50 transition-all duration-200 group
                  hover:bg-slate-700/30 cursor-pointer
                  ${N?"bg-purple-500/10":""}
                `,children:[e.jsx("td",{className:"py-3 px-2",children:e.jsx("button",{onClick:D=>{D.stopPropagation(),t(o.symbol)},className:"p-1 hover:bg-slate-600/50 rounded transition-colors",children:N?e.jsx(Ie,{className:"w-4 h-4 text-purple-400"}):e.jsx(Z,{className:"w-4 h-4 text-slate-500 group-hover:text-slate-400"})})}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:`
                    text-center font-bold text-sm ltr-numbers
                    ${d<3?"text-yellow-400":d<10?"text-cyan-400":"text-slate-400"}
                  `,children:["#",d+1]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"font-bold text-white text-base",children:o.symbol}),e.jsx(E,{direction:x,size:"xs"})]})}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:"text-center font-mono text-sm text-white ltr-numbers",children:["$",f>0?f.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):"N/A"]})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:`
                    text-center font-mono text-sm font-semibold ltr-numbers
                    ${m>=.7?"text-emerald-400":m>=.4?"text-amber-400":"text-red-400"}
                  `,children:h(m)})}),e.jsx("td",{className:"py-3 px-3",children:e.jsxs("div",{className:`
                    text-center font-mono text-sm font-semibold ltr-numbers
                    ${p<33?"text-emerald-400":p<66?"text-amber-400":"text-red-400"}
                  `,children:[p.toFixed(0),"%"]})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ltr-numbers
                      ${j>=.7?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":j>=.4?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-700/30 text-slate-400 border border-slate-600/30"}
                    `,children:(j*100).toFixed(0)})})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ltr-numbers
                      ${k>=.7?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":k>=.4?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-700/30 text-slate-400 border border-slate-600/30"}
                    `,children:(k*100).toFixed(0)})})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ltr-numbers
                      ${F>=.7?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":F>=.4?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-700/30 text-slate-400 border border-slate-600/30"}
                    `,children:(F*100).toFixed(0)})})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ltr-numbers
                      ${y>=.7?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":y>=.4?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-700/30 text-slate-400 border border-slate-600/30"}
                    `,children:(y*100).toFixed(0)})})}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:`
                      w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold ltr-numbers
                      ${w>=.7?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30":w>=.4?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-slate-700/30 text-slate-400 border border-slate-600/30"}
                    `,children:(w*100).toFixed(0)})})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:`
                      text-lg font-bold ltr-numbers
                      ${m>=.7?"text-emerald-400":m>=.4?"text-amber-400":"text-red-400"}
                    `,children:h(m)}),e.jsx("div",{className:"h-1.5 rounded-full overflow-hidden bg-slate-700/50",style:{width:"80px"},children:e.jsx("div",{className:`h-full transition-all duration-700 ease-out ${m<.3?"bg-gradient-to-r from-red-500 to-red-600":m<.7?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gradient-to-r from-emerald-500 to-emerald-600"}`,style:{width:`${m*100}%`}})})]})})]},`${o.symbol}-${d}`)})})]})})},Vt=({results:s,selectedSymbols:l,onToggleSelection:t})=>{const a=r=>r.overall_score??r.final_score??r.score??0,n=r=>r.overall_direction??r.direction??"NEUTRAL",i=r=>{var h;return r.tf_count??((h=r.timeframes)==null?void 0:h.length)??0},c=r=>{if(r.sample_components){const h=Object.values(r.sample_components),o=h.length;return{active:h.filter(m=>m.score>.5).length,total:o}}return{active:0,total:9}};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[s.map((r,h)=>{const o=a(r),d=n(r),m=i(r),x=c(r),f=l.has(r.symbol);return e.jsxs("div",{className:`
              relative bg-slate-800/40 backdrop-blur-sm border rounded-xl p-5 space-y-4
              transition-all duration-300 hover:scale-[1.02] hover:shadow-xl cursor-pointer group
              ${f?"border-purple-500/50 bg-purple-500/10 shadow-lg shadow-purple-500/20":"border-slate-700/50 hover:border-slate-600/50"}
            `,style:{animationDelay:`${h*50}ms`,animation:"fadeInUp 0.5s ease-out forwards"},children:[e.jsx("button",{onClick:p=>{p.stopPropagation(),t(r.symbol)},className:"absolute top-3 left-3 p-1 hover:bg-slate-700/50 rounded transition-colors z-10","aria-label":`انتخاب ${r.symbol}`,children:f?e.jsx(Se,{className:"w-5 h-5 text-purple-400"}):e.jsx(Ce,{className:"w-5 h-5 text-slate-500 group-hover:text-slate-400"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-xl font-bold text-white",children:r.symbol}),e.jsx("div",{className:o>.8?"animate-pulse":"",children:e.jsx(E,{direction:d,size:"sm"})})]}),e.jsx("div",{className:"flex justify-center py-2",children:e.jsx(W,{score:o,size:"lg",showLabel:!0})}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-400",children:[e.jsx("span",{children:"قدرت سیگنال"}),e.jsxs("span",{children:[(o*100).toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 rounded-full overflow-hidden bg-slate-700/50",children:e.jsx("div",{className:`h-full transition-all duration-700 ease-out ${o<.3?"bg-gradient-to-r from-red-500 to-red-600":o<.7?"bg-gradient-to-r from-amber-500 to-amber-600":"bg-gradient-to-r from-emerald-500 to-emerald-600"}`,style:{width:`${o*100}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-center",children:[e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3 border border-slate-700/30",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"سیگنال‌ها"}),e.jsxs("div",{className:"text-lg font-bold text-slate-200",children:[x.active,"/",x.total]})]}),e.jsxs("div",{className:"bg-slate-900/50 rounded-lg p-3 border border-slate-700/30",children:[e.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"بازه‌ها"}),e.jsx("div",{className:"text-lg font-bold text-slate-200",children:m})]})]}),r.timeframes&&r.timeframes.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:r.timeframes.slice(0,4).map(p=>e.jsx("span",{className:`
                      px-2 py-1 rounded text-xs font-mono font-semibold border
                      ${d==="BULLISH"?"bg-emerald-500/20 border-emerald-500/30 text-emerald-300":d==="BEARISH"?"bg-red-500/20 border-red-500/30 text-red-300":"bg-slate-600/20 border-slate-500/30 text-slate-400"}
                    `,children:p},p))}),e.jsxs("button",{onClick:()=>console.log("Open details for",r.symbol),className:"w-full flex items-center justify-center gap-2 px-4 py-2 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 hover:from-cyan-500/30 hover:to-blue-500/30 border border-cyan-500/30 text-cyan-400 rounded-lg font-medium transition-all hover:scale-105",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"مشاهده جزئیات"})]})]},`${r.symbol}-${h}`)}),e.jsx("style",{jsx:!0,children:`
        @keyframes fadeInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
      `})]})},qt=({results:s})=>{const l=a=>a.overall_score??a.final_score??a.score??0,t=a=>a.overall_direction??a.direction??"NEUTRAL";return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-sm text-slate-400 text-center py-4 bg-slate-900/30 rounded-lg border border-slate-700/30",children:"💡 نمای نمودار: نمایش بصری امتیازات و روندها"}),e.jsx("div",{className:"space-y-4",children:s.map((a,n)=>{var r;const i=l(a),c=t(a);return e.jsx("div",{className:"bg-slate-800/40 backdrop-blur-sm border border-slate-700/50 rounded-xl p-4 hover:border-slate-600/50 transition-all",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-32 flex flex-col gap-2",children:[e.jsx("div",{className:"font-bold text-white text-lg",children:a.symbol}),e.jsx(E,{direction:c,size:"sm"})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(W,{score:i,size:"sm",showLabel:!1})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"flex justify-between text-xs text-slate-400",children:e.jsxs("span",{children:["امتیاز: ",(i*100).toFixed(0),"%"]})}),e.jsxs("div",{className:"relative h-8 rounded-lg overflow-hidden bg-slate-900/50 border border-slate-700/30",children:[e.jsx("div",{className:`
                        absolute inset-y-0 right-0 transition-all duration-1000 ease-out
                        ${i<.3?"bg-gradient-to-l from-red-500 to-red-600":i<.7?"bg-gradient-to-l from-amber-500 to-amber-600":"bg-gradient-to-l from-emerald-500 to-emerald-600"}
                      `,style:{width:`${i*100}%`,animationDelay:`${n*100}ms`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-white font-bold text-sm drop-shadow-lg",children:[(i*100).toFixed(0),"%"]})})]})]}),e.jsx("div",{className:"flex gap-2",children:(r=a.timeframes)==null?void 0:r.slice(0,3).map(h=>e.jsx("span",{className:`
                        px-2 py-1 rounded text-xs font-mono border
                        ${c==="BULLISH"?"bg-emerald-500/20 border-emerald-500/30 text-emerald-300":c==="BEARISH"?"bg-red-500/20 border-red-500/30 text-red-300":"bg-slate-600/20 border-slate-500/30 text-slate-400"}
                      `,children:h},h))}),e.jsx("button",{onClick:()=>console.log("Open details for",a.symbol),className:"px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 border border-cyan-500/30 rounded-lg text-sm font-medium transition-all whitespace-nowrap",children:"جزئیات"})]})},`${a.symbol}-${n}`)})})]})},Xt=({results:s})=>{const[l,t]=g.useState(null),a=o=>o.overall_score??o.final_score??o.score??0,n=o=>o.overall_direction??o.direction??"NEUTRAL",i=o=>o<.3?"bg-red-500":o<.4?"bg-red-400":o<.5?"bg-orange-400":o<.6?"bg-yellow-400":o<.7?"bg-lime-400":o<.8?"bg-emerald-400":"bg-emerald-500",c=o=>Math.max(.3,Math.min(1,o+.2)),r=s.length,h=Math.ceil(Math.sqrt(r));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-slate-900/30 rounded-lg border border-slate-700/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"🗺️ نقشه حرارتی بازار"}),e.jsx("p",{className:"text-sm text-slate-400",children:"اندازه مربع = امتیاز | رنگ = جهت | شدت رنگ = قدرت سیگنال"})]}),e.jsx("div",{className:"bg-slate-900/30 rounded-xl border border-slate-700/30 p-6 overflow-hidden",style:{display:"grid",gridTemplateColumns:`repeat(${h}, 1fr)`,gap:"8px",minHeight:"400px"},children:s.map(o=>{const d=a(o),m=n(o),x=Math.max(60,d*150),f=l===o.symbol;return e.jsxs("div",{className:"flex items-center justify-center relative",onMouseEnter:()=>t(o.symbol),onMouseLeave:()=>t(null),children:[e.jsxs("div",{className:`
                  ${i(d)} rounded-lg flex flex-col items-center justify-center
                  transition-all duration-300 cursor-pointer
                  ${f?"scale-110 shadow-2xl z-10":"hover:scale-105"}
                `,style:{width:`${x}px`,height:`${x}px`,opacity:c(d)},children:[e.jsx("span",{className:"text-white font-bold text-sm drop-shadow-lg",children:o.symbol.replace("USDT","")}),e.jsxs("span",{className:"text-white text-xs font-semibold mt-1 drop-shadow-lg",children:[(d*100).toFixed(0),"%"]}),m==="BULLISH"&&e.jsx("span",{className:"text-white text-lg",children:"↑"}),m==="BEARISH"&&e.jsx("span",{className:"text-white text-lg",children:"↓"})]}),f&&e.jsxs("div",{className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 z-20 w-48 p-3 bg-slate-800 border border-slate-700 rounded-lg shadow-2xl text-sm",children:[e.jsx("div",{className:"font-bold text-white mb-1",children:o.symbol}),e.jsxs("div",{className:"text-slate-300 space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"امتیاز:"}),e.jsxs("span",{className:"font-mono",children:[(d*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"جهت:"}),e.jsx("span",{className:m==="BULLISH"?"text-emerald-400":m==="BEARISH"?"text-red-400":"text-slate-400",children:m==="BULLISH"?"صعودی":m==="BEARISH"?"نزولی":"خنثی"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"بازه‌ها:"}),e.jsx("span",{className:"font-mono",children:o.tf_count||0})]})]})]})]},o.symbol)})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 p-4 bg-slate-900/30 rounded-lg border border-slate-700/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"جهت:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-emerald-500 rounded"}),e.jsx("span",{className:"text-xs text-slate-300",children:"صعودی"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{className:"text-xs text-slate-300",children:"نزولی"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-xs text-slate-300",children:"خنثی"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"قدرت:"}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("div",{className:"w-8 h-3 bg-emerald-500 opacity-30 rounded"}),e.jsx("div",{className:"w-8 h-3 bg-emerald-500 opacity-50 rounded"}),e.jsx("div",{className:"w-8 h-3 bg-emerald-500 opacity-70 rounded"}),e.jsx("div",{className:"w-8 h-3 bg-emerald-500 opacity-100 rounded"}),e.jsx("span",{className:"text-xs text-slate-300 mr-2",children:"ضعیف → قوی"})]})]})]})]})},Kt=({results:s})=>{const[l,t]=g.useState(!1),[a,n]=g.useState(!1),i=m=>m.overall_score??m.final_score??m.score??0,c=m=>m.overall_direction??m.direction??"NEUTRAL",r=()=>{const m=["نماد","امتیاز","جهت","تعداد بازه‌های زمانی","بازه‌ها"],x=s.map(k=>[k.symbol,i(k).toFixed(2),c(k),k.tf_count||0,(k.timeframes||[]).join("; ")]),f=[m.join(","),...x.map(k=>k.join(","))].join(`
`),p=new Blob(["\uFEFF"+f],{type:"text/csv;charset=utf-8;"}),N=URL.createObjectURL(p),j=document.createElement("a");j.href=N,j.download=`scanner-results-${Date.now()}.csv`,j.click(),URL.revokeObjectURL(N),t(!1)},h=()=>{const m=s.map(j=>({symbol:j.symbol,score:i(j),direction:c(j),timeframes:j.timeframes||[],tf_count:j.tf_count||0,sample_components:j.sample_components})),x=JSON.stringify(m,null,2),f=new Blob([x],{type:"application/json"}),p=URL.createObjectURL(f),N=document.createElement("a");N.href=p,N.download=`scanner-results-${Date.now()}.json`,N.click(),URL.revokeObjectURL(p),t(!1)},o=async()=>{const m=s.map(x=>`${x.symbol}: ${(i(x)*100).toFixed(0)}% - ${c(x)}`).join(`
`);try{await navigator.clipboard.writeText(m),n(!0),setTimeout(()=>n(!1),2e3)}catch(x){console.error("Failed to copy:",x)}t(!1)},d=async()=>{const m=`🔍 نتایج اسکن بازار

`+s.slice(0,5).map(x=>`${x.symbol}: ${(i(x)*100).toFixed(0)}% - ${c(x)}`).join(`
`)+(s.length>5?`

... و ${s.length-5} نماد دیگر`:"");if(navigator.share)try{await navigator.share({title:"نتایج اسکن بازار",text:m})}catch{console.log("Share cancelled or failed")}else await o();t(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>t(!l),disabled:s.length===0,className:"flex items-center gap-2 px-4 py-2 bg-slate-700/70 border border-slate-600 text-slate-300 rounded-lg hover:bg-slate-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsx("span",{children:"خروجی"})]}),l&&e.jsxs("div",{className:"absolute left-0 top-full mt-2 w-56 bg-slate-800 border border-slate-700 rounded-lg shadow-2xl z-20 overflow-hidden",children:[e.jsxs("button",{onClick:r,className:"w-full px-4 py-3 text-right hover:bg-slate-700/50 text-slate-300 transition-colors flex items-center gap-3 border-b border-slate-700",children:[e.jsx(J,{className:"w-4 h-4 text-emerald-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"خروجی CSV"}),e.jsx("div",{className:"text-xs text-slate-400",children:"برای Excel و Google Sheets"})]})]}),e.jsxs("button",{onClick:h,className:"w-full px-4 py-3 text-right hover:bg-slate-700/50 text-slate-300 transition-colors flex items-center gap-3 border-b border-slate-700",children:[e.jsx(J,{className:"w-4 h-4 text-cyan-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"خروجی JSON"}),e.jsx("div",{className:"text-xs text-slate-400",children:"فرمت داده ساختاریافته"})]})]}),e.jsxs("button",{onClick:o,className:"w-full px-4 py-3 text-right hover:bg-slate-700/50 text-slate-300 transition-colors flex items-center gap-3 border-b border-slate-700",children:[a?e.jsx(Ne,{className:"w-4 h-4 text-green-400"}):e.jsx(Me,{className:"w-4 h-4 text-blue-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a?"کپی شد!":"کپی متن"}),e.jsx("div",{className:"text-xs text-slate-400",children:"کپی به کلیپ‌بورد"})]})]}),e.jsxs("button",{onClick:d,className:"w-full px-4 py-3 text-right hover:bg-slate-700/50 text-slate-300 transition-colors flex items-center gap-3",children:[e.jsx(_e,{className:"w-4 h-4 text-purple-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"اشتراک‌گذاری"}),e.jsx("div",{className:"text-xs text-slate-400",children:"ارسال به دیگران"})]})]})]})]})},Jt=({symbols:s,results:l,onClose:t})=>{const a=r=>r.overall_score??r.final_score??r.score??0,n=r=>r.overall_direction??r.direction??"NEUTRAL",i=r=>{if(r.sample_components){const h=Object.values(r.sample_components),o=h.length;return{active:h.filter(m=>m.score>.5).length,total:o}}return{active:0,total:9}},c=l.reduce((r,h)=>a(h)>a(r)?h:r,l[0]);return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-300",children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:"📊 مقایسه نمادها"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["مقایسه جانبه ",l.length," نماد انتخاب شده"]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors","aria-label":"بستن",children:e.jsx(P,{className:"w-6 h-6 text-slate-400"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border border-cyan-500/30 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"w-5 h-5 text-cyan-400"}),e.jsx("span",{className:"font-semibold text-cyan-300",children:"بهترین فرصت:"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:c==null?void 0:c.symbol}),e.jsx(E,{direction:n(c),size:"md"}),e.jsxs("span",{className:"text-cyan-400 text-lg font-mono",children:[(a(c)*100).toFixed(0),"%"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-right py-3 px-4 text-slate-400 font-semibold text-sm",children:"معیار"}),l.map(r=>e.jsx("th",{className:"text-center py-3 px-4 text-slate-400 font-semibold text-sm",children:r.symbol},r.symbol))]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("td",{className:"py-4 px-4 text-slate-300 font-medium",children:"امتیاز نهایی"}),l.map(r=>e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(W,{score:a(r),size:"sm",showLabel:!1})})},r.symbol))]}),e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("td",{className:"py-4 px-4 text-slate-300 font-medium",children:"جهت"}),l.map(r=>e.jsx("td",{className:"py-4 px-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx(E,{direction:n(r),size:"sm"})})},r.symbol))]}),e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("td",{className:"py-4 px-4 text-slate-300 font-medium",children:"سیگنال‌های فعال"}),l.map(r=>{const{active:h,total:o}=i(r);return e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsxs("span",{className:"text-slate-200 font-mono font-semibold",children:[h,"/",o]})},r.symbol)})]}),e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("td",{className:"py-4 px-4 text-slate-300 font-medium",children:"تعداد بازه‌ها"}),l.map(r=>{var h;return e.jsx("td",{className:"py-4 px-4 text-center",children:e.jsx("span",{className:"text-slate-200 font-mono font-semibold",children:r.tf_count||((h=r.timeframes)==null?void 0:h.length)||0})},r.symbol)})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 px-4 text-slate-300 font-medium",children:"توصیه"}),l.map(r=>{const h=a(r),o=r.symbol===c.symbol;return e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[o&&e.jsx("span",{className:"text-xs font-semibold text-cyan-400 bg-cyan-500/20 px-2 py-1 rounded",children:"⭐ بهترین"}),h>=.7?e.jsx("span",{className:"text-xs text-emerald-400",children:"✓ قوی"}):h>=.5?e.jsx("span",{className:"text-xs text-amber-400",children:"~ متوسط"}):e.jsx("span",{className:"text-xs text-red-400",children:"✗ ضعیف"})]})},r.symbol)})]})]})]})}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-700/50 rounded-xl p-4 space-y-3",children:[e.jsx("h3",{className:"font-semibold text-white flex items-center gap-2",children:"💡 تحلیل مقایسه‌ای"}),e.jsxs("ul",{className:"space-y-2 text-sm text-slate-300",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-400",children:"•"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-white",children:c==null?void 0:c.symbol})," بالاترین امتیاز (",(a(c)*100).toFixed(0),"%) را دارد و بهترین فرصت معاملاتی است."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-400",children:"•"}),e.jsxs("span",{children:[l.filter(r=>n(r)==="BULLISH").length," نماد روند صعودی و"," ",l.filter(r=>n(r)==="BEARISH").length," نماد روند نزولی دارند."]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-cyan-400",children:"•"}),e.jsx("span",{children:"توصیه می‌شود ابتدا نمادهای با امتیاز بالاتر از ۷۰٪ را بررسی کنید."})]})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:t,className:"px-6 py-2 bg-slate-700 text-slate-300 rounded-lg font-medium hover:bg-slate-600 transition-colors",children:"بستن"}),e.jsxs("button",{onClick:()=>console.log("Open details for best:",c==null?void 0:c.symbol),className:"px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-700 transition-all",children:["جزئیات ",c==null?void 0:c.symbol]})]})]})})},ae=[{keys:["↑","↓"],description:"پیمایش بین نتایج",category:"پیمایش"},{keys:["Enter"],description:"باز کردن جزئیات نماد",category:"پیمایش"},{keys:["Space"],description:"انتخاب/عدم انتخاب نماد",category:"پیمایش"},{keys:["Esc"],description:"پاک کردن فیلترها / بستن مودال",category:"پیمایش"},{keys:["Tab"],description:"جابجایی بین کنترل‌ها",category:"پیمایش"},{keys:["Ctrl","S"],description:"اجرای اسکن عمیق",category:"عملیات"},{keys:["Ctrl","Q"],description:"اجرای اسکن سریع",category:"عملیات"},{keys:["Ctrl","E"],description:"خروجی گرفتن از نتایج",category:"عملیات"},{keys:["Ctrl","F"],description:"فوکوس روی جستجو",category:"عملیات"},{keys:["Ctrl","A"],description:"انتخاب همه نتایج",category:"عملیات"},{keys:["Ctrl","D"],description:"حذف انتخاب همه",category:"عملیات"},{keys:["1"],description:"نمای لیست",category:"نماها"},{keys:["2"],description:"نمای شبکه",category:"نماها"},{keys:["3"],description:"نمای نمودار",category:"نماها"},{keys:["F"],description:"باز کردن فیلترهای پیشرفته",category:"فیلترها"},{keys:["B"],description:"فقط نمادهای صعودی",category:"فیلترها"},{keys:["N"],description:"فقط نمادهای نزولی",category:"فیلترها"},{keys:["R"],description:"بازنشانی فیلترها",category:"فیلترها"},{keys:["?"],description:"نمایش این راهنما",category:"راهنما"}],Yt=({isOpen:s,onClose:l})=>{if(!s)return null;const t=Array.from(new Set(ae.map(a=>a.category)));return e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:l,children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-3xl max-h-[85vh] overflow-hidden flex flex-col",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:e.jsx(Ae,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"میانبرهای صفحه‌کلید"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"برای افزایش سرعت کار با اسکنر از این میانبرها استفاده کنید"})]})]}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors","aria-label":"بستن",children:e.jsx(P,{className:"w-6 h-6 text-slate-400"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(a=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-bold text-cyan-400 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full"}),a]}),e.jsx("div",{className:"space-y-2",children:ae.filter(n=>n.category===a).map((n,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900/50 rounded-lg border border-slate-700/30 hover:border-slate-600/50 transition-colors",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:n.description}),e.jsx("div",{className:"flex items-center gap-1",children:n.keys.map((c,r)=>e.jsxs(le.Fragment,{children:[e.jsx("kbd",{className:"px-2 py-1 bg-slate-700 border border-slate-600 rounded text-xs font-mono text-white shadow-sm min-w-[2rem] text-center",children:c}),r<n.keys.length-1&&e.jsx("span",{className:"text-slate-500 text-xs",children:"+"})]},r))})]},i))})]},a))}),e.jsxs("div",{className:"mt-6 p-4 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/30 rounded-xl",children:[e.jsx("h4",{className:"font-semibold text-purple-300 mb-2 flex items-center gap-2",children:"💡 نکات"}),e.jsxs("ul",{className:"space-y-1 text-sm text-slate-300",children:[e.jsx("li",{children:"• برای استفاده از میانبرها، ابتدا مطمئن شوید فوکوس روی صفحه است"}),e.jsx("li",{children:"• در نمای لیست، می‌توانید با فلش‌ها بین نتایج حرکت کنید"}),e.jsx("li",{children:"• برای انتخاب چند نماد، Space را روی هر کدام بزنید"}),e.jsx("li",{children:'• Ctrl+S مانند کلیک روی دکمه "اسکن عمیق" عمل می‌کند'})]})]})]}),e.jsxs("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between bg-slate-900/50",children:[e.jsxs("div",{className:"text-xs text-slate-400",children:["برای چاپ این راهنما: ",e.jsx("kbd",{className:"px-2 py-1 bg-slate-700 rounded text-white",children:"Ctrl+P"})]}),e.jsx("button",{onClick:l,className:"px-6 py-2 bg-gradient-to-r from-cyan-500 to-blue-600 text-white rounded-lg font-medium hover:from-cyan-600 hover:to-blue-700 transition-all",children:"فهمیدم!"})]})]})})},Qt=({isOpen:s,onClose:l,onRestore:t})=>{const[a,n]=g.useState([]);g.useEffect(()=>{const d=localStorage.getItem("scanner_session_history");if(d)try{n(JSON.parse(d))}catch(m){console.error("Failed to load session history:",m)}},[s]);const i=d=>{const m=d.slice(0,50);localStorage.setItem("scanner_session_history",JSON.stringify(m)),n(m)},c=d=>{const m=a.map(x=>x.id===d?{...x,isPinned:!x.isPinned}:x);m.sort((x,f)=>(f.isPinned?1:0)-(x.isPinned?1:0)),i(m)},r=d=>{confirm("آیا مطمئن هستید که می‌خواهید این جلسه را حذف کنید؟")&&i(a.filter(m=>m.id!==d))},h=()=>{confirm("آیا مطمئن هستید که می‌خواهید تمام تاریخچه را پاک کنید؟")&&(localStorage.removeItem("scanner_session_history"),n([]))},o=d=>{const m=new Date,x=new Date(d),f=m.getTime()-x.getTime(),p=Math.floor(f/6e4);if(p<1)return"همین الان";if(p<60)return`${p} دقیقه پیش`;const N=Math.floor(p/60);return N<24?`${N} ساعت پیش`:`${Math.floor(N/24)} روز پیش`};return s?e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-in fade-in duration-200",onClick:l,children:e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-2xl shadow-2xl w-full max-w-4xl max-h-[85vh] overflow-hidden flex flex-col",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-cyan-500 to-blue-500 flex items-center justify-center",children:e.jsx(Q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"تاریخچه اسکن‌ها"}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[a.length," جلسه ذخیره شده"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.length>0&&e.jsx("button",{onClick:h,className:"px-3 py-2 text-sm bg-red-500/20 border border-red-500/30 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",children:"پاک کردن همه"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors","aria-label":"بستن",children:e.jsx(P,{className:"w-6 h-6 text-slate-400"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Q,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-400 mb-2",children:"هنوز هیچ اسکنی انجام نشده"}),e.jsx("p",{className:"text-sm text-slate-500",children:"اسکن‌های شما به صورت خودکار در اینجا ذخیره می‌شوند"})]}):e.jsx("div",{className:"space-y-3",children:a.map(d=>e.jsx("div",{className:`
                    bg-slate-900/50 border rounded-xl p-4 transition-all hover:border-slate-600/50
                    ${d.isPinned?"border-yellow-500/30 bg-yellow-500/5":"border-slate-700/50"}
                  `,children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.isPinned&&e.jsx(G,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"}),e.jsx(re,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-400",children:o(d.timestamp)}),e.jsxs("span",{className:"text-xs text-slate-500",children:["• ",new Date(d.timestamp).toLocaleString("fa-IR")]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"نمادها:"}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[d.symbols.slice(0,5).map(m=>e.jsx("span",{className:"px-2 py-0.5 bg-slate-700/50 text-slate-300 rounded text-xs",children:m},m)),d.symbols.length>5&&e.jsxs("span",{className:"px-2 py-0.5 text-slate-400 text-xs",children:["+",d.symbols.length-5]})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-400",children:"بازه‌ها:"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:d.timeframes.map(m=>e.jsx("span",{className:"px-2 py-0.5 bg-slate-700/50 text-slate-300 rounded text-xs font-mono",children:m},m))})]})]}),d.topResults.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-700/50",children:[e.jsxs("span",{className:"text-xs text-slate-400 mb-2 block",children:["نتایج برتر (",d.resultsCount," فرصت):"]}),e.jsx("div",{className:"flex gap-3",children:d.topResults.map(m=>e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-slate-300 font-medium",children:m.symbol}),e.jsxs("span",{className:"text-emerald-400 font-mono",children:[(m.score*100).toFixed(0),"%"]})]},m.symbol))})]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{onClick:()=>c(d.id),className:`p-2 rounded-lg transition-colors ${d.isPinned?"bg-yellow-500/20 text-yellow-400 hover:bg-yellow-500/30":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"}`,title:d.isPinned?"حذف پین":"پین کردن",children:e.jsx(G,{className:`w-4 h-4 ${d.isPinned?"fill-current":""}`})}),e.jsx("button",{onClick:()=>{t(d),l()},className:"px-3 py-2 bg-cyan-500/20 border border-cyan-500/30 text-cyan-400 rounded-lg text-sm font-medium hover:bg-cyan-500/30 transition-colors whitespace-nowrap",children:"بازیابی"}),e.jsx("button",{onClick:()=>r(d.id),className:"p-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors",title:"حذف",children:e.jsx(oe,{className:"w-4 h-4"})})]})]})},d.id))})}),e.jsx("div",{className:"p-4 border-t border-slate-700 bg-slate-900/50",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-400",children:[e.jsx("span",{children:"تاریخچه به صورت خودکار ذخیره می‌شود (حداکثر ۵۰ جلسه)"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg font-medium hover:bg-slate-600 transition-colors",children:"بستن"})]})})]})}):null},Gt=(s,l,t)=>{const a=localStorage.getItem("scanner_session_history"),n=a?JSON.parse(a):[],i={id:Date.now().toString(),timestamp:new Date().toISOString(),symbols:s,timeframes:l,resultsCount:t.length,topResults:t.sort((c,r)=>(r.score||r.final_score||0)-(c.score||c.final_score||0)).slice(0,3).map(c=>({symbol:c.symbol,score:c.score||c.final_score||0})),isPinned:!1};n.unshift(i),localStorage.setItem("scanner_session_history",JSON.stringify(n.slice(0,50)))},ss=()=>{const s=fe(),l=g.useRef(null),[t,a]=g.useState({symbols:s.symbols,timeframes:s.timeframes,isScanning:!1,results:[],error:null,hasScanned:!1,scanTime:null,viewMode:"list",sortBy:"score",sortDirection:"desc",directionFilter:"all",searchQuery:"",advancedFilters:{scoreMin:0,scoreMax:1,priceChange:"any",volumeMin:0,signalCountMin:0,tfAgreement:"any"},showAdvancedFilters:!1,autoRefresh:!1,autoRefreshInterval:300,selectedSymbols:new Set,showComparison:!1}),[n,i]=g.useState(!1),[c,r]=g.useState(!1),h=g.useCallback(u=>u.overall_score??u.final_score??u.score??0,[]),o=g.useCallback(u=>u.overall_direction??u.direction??"NEUTRAL",[]),d=g.useCallback(async(u=!1)=>{a(b=>({...b,isScanning:!0,error:null,hasScanned:!0}));try{if(t.symbols.length===0)throw new Error("لطفاً حداقل یک نماد انتخاب کنید");if(t.timeframes.length===0)throw new Error("لطفاً حداقل یک بازه زمانی انتخاب کنید");const b={symbols:t.symbols,timeframes:t.timeframes,weights:s.weights,rules:{min_score:s.rules.any_tf,min_confidence:s.rules.majority_tf,max_risk_level:s.rules.mode==="aggressive"?"HIGH":"MEDIUM",quick_scan:u}};console.log("Scanner request:",b);const S=await be.post("/api/scanner/run",b),C=S.results||S.result||[];a(M=>({...M,results:C,error:null,isScanning:!1,scanTime:new Date().toISOString()})),Gt(t.symbols,t.timeframes,C)}catch(b){console.error("Scanner error:",b),a(S=>({...S,error:b.message||"خطا در اسکن بازار",results:[],isScanning:!1}))}},[t.symbols,t.timeframes,s.weights,s.rules]);g.useEffect(()=>{if(t.autoRefresh&&t.hasScanned)return l.current&&clearInterval(l.current),l.current=setInterval(()=>{console.log("Auto-refresh triggered"),d(!0)},t.autoRefreshInterval*1e3),()=>{l.current&&clearInterval(l.current)}},[t.autoRefresh,t.autoRefreshInterval,t.hasScanned,d]);const m=g.useMemo(()=>{let u=[...t.results];t.searchQuery&&(u=u.filter(T=>T.symbol.toLowerCase().includes(t.searchQuery.toLowerCase()))),t.directionFilter!=="all"&&(u=u.filter(T=>o(T)===t.directionFilter));const{scoreMin:b,scoreMax:S,signalCountMin:C,tfAgreement:M,priceChange:O}=t.advancedFilters;return u=u.filter(T=>{const X=h(T);return!(X<b||X>S||(T.sample_components?Object.keys(T.sample_components).length:0)<C||M==="full"&&T.tf_count!==t.timeframes.length||M==="majority"&&T.tf_count&&T.tf_count<Math.ceil(t.timeframes.length/2))}),u},[t.results,t.searchQuery,t.directionFilter,t.advancedFilters,t.timeframes.length,h,o]),x=g.useMemo(()=>{const u=[...m];return u.sort((b,S)=>{let C,M;switch(t.sortBy){case"score":C=h(b),M=h(S);break;case"symbol":C=b.symbol,M=S.symbol;break;case"change":C=0,M=0;break;case"volume":C=0,M=0;break;default:return 0}const O=typeof C=="string"?C.localeCompare(M):C-M;return t.sortDirection==="asc"?O:-O}),u},[m,t.sortBy,t.sortDirection,h]),f=g.useCallback(u=>{a(b=>({...b,symbols:u}))},[]),p=g.useCallback(u=>{a(b=>({...b,timeframes:u}))},[]),N=g.useCallback(u=>{a(b=>({...b,viewMode:u}))},[]),j=g.useCallback(u=>{a(b=>({...b,sortBy:u,sortDirection:b.sortBy===u&&b.sortDirection==="desc"?"asc":"desc"}))},[]),k=g.useCallback(u=>{a(b=>({...b,directionFilter:u}))},[]),F=g.useCallback(u=>{a(b=>({...b,searchQuery:u}))},[]),y=g.useCallback(u=>{a(b=>({...b,advancedFilters:{...b.advancedFilters,...u}}))},[]),w=g.useCallback((u,b)=>{a(S=>({...S,autoRefresh:u,autoRefreshInterval:b??S.autoRefreshInterval}))},[]),D=g.useCallback(u=>{a(b=>{const S=new Set(b.selectedSymbols);if(S.has(u))S.delete(u);else{if(S.size>=4)return b;S.add(u)}return{...b,selectedSymbols:S}})},[]);g.useCallback(()=>{a(u=>({...u,selectedSymbols:new Set}))},[]);const U=g.useCallback(()=>{a(u=>({...u,showComparison:!u.showComparison}))},[]);return At([{key:"s",ctrlKey:!0,handler:u=>{u.preventDefault(),t.isScanning||d(!1)},description:"اجرای اسکن عمیق"},{key:"q",ctrlKey:!0,handler:()=>{t.isScanning||d(!0)},description:"اجرای اسکن سریع"},{key:"1",handler:()=>N("list"),description:"نمای لیست"},{key:"2",handler:()=>N("grid"),description:"نمای شبکه"},{key:"3",handler:()=>N("chart"),description:"نمای نمودار"},{key:"4",handler:()=>N("heatmap"),description:"نقشه حرارتی"},{key:"f",handler:()=>a(u=>({...u,showAdvancedFilters:!u.showAdvancedFilters})),description:"فیلترهای پیشرفته"},{key:"b",handler:()=>k("BULLISH"),description:"فقط صعودی"},{key:"n",handler:()=>k("BEARISH"),description:"فقط نزولی"},{key:"r",handler:()=>k("all"),description:"بازنشانی فیلتر جهت"},{key:"?",handler:()=>i(!0),description:"نمایش راهنمای میانبرها"},{key:"Escape",handler:()=>{n?i(!1):t.showComparison&&U()},description:"بستن مودال‌ها"}],!n&&!t.showComparison),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2 flex items-center gap-3",children:["🔍 اسکنر پیشرفته بازار",e.jsxs("button",{onClick:()=>i(!0),className:"text-sm px-3 py-1 bg-purple-500/20 border border-purple-500/30 text-purple-300 rounded-lg hover:bg-purple-500/30 transition-colors flex items-center gap-1",title:"میانبرهای صفحه‌کلید",children:[e.jsx("span",{children:"?"}),e.jsx("span",{className:"hidden sm:inline",children:"میانبرها"})]})]}),e.jsx("p",{className:"text-slate-400",children:"اسکن چند بازه زمانی با تحلیل ترکیبی ۹ الگوریتم حرفه‌ای"})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-700/70 border border-slate-600 text-slate-300 rounded-lg hover:bg-slate-700 transition-colors font-medium",children:[e.jsx("span",{children:"📜"}),e.jsx("span",{className:"hidden sm:inline",children:"تاریخچه"})]}),e.jsx(Kt,{results:x}),e.jsx(zt,{symbols:t.symbols,timeframes:t.timeframes,onLoad:u=>{a(b=>({...b,symbols:u.symbols,timeframes:u.timeframes}))}})]})]}),e.jsxs("div",{className:"bg-slate-800/40 backdrop-blur-xl rounded-2xl border border-slate-700/50 p-6 space-y-6",children:[e.jsx(Lt,{onSelectGroup:f}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(_t,{symbols:t.symbols,onChange:f,disabled:t.isScanning}),e.jsx(Rt,{timeframes:t.timeframes,onChange:p,disabled:t.isScanning})]}),e.jsx($t,{filters:t.advancedFilters,onChange:y,isExpanded:t.showAdvancedFilters,onToggle:()=>a(u=>({...u,showAdvancedFilters:!u.showAdvancedFilters}))}),e.jsx(Ht,{onDeepScan:()=>d(!1),onQuickScan:()=>d(!0),isScanning:t.isScanning,autoRefresh:t.autoRefresh,autoRefreshInterval:t.autoRefreshInterval,onAutoRefreshToggle:w})]}),e.jsxs("div",{className:"bg-slate-800/40 backdrop-blur-xl rounded-2xl border border-slate-700/50 p-6 space-y-6",children:[e.jsx(Bt,{resultsCount:x.length,scanTime:t.scanTime,viewMode:t.viewMode,onViewModeChange:N,sortBy:t.sortBy,onSortChange:j,directionFilter:t.directionFilter,onDirectionFilterChange:k,searchQuery:t.searchQuery,onSearchChange:F,selectedCount:t.selectedSymbols.size,onToggleComparison:U,showComparison:t.showComparison}),t.isScanning&&e.jsx(pe,{message:"در حال تحلیل نمادها..."}),!t.isScanning&&t.error&&e.jsx(ge,{message:t.error,onRetry:()=>d(!1)}),!t.isScanning&&!t.error&&!t.hasScanned&&e.jsx(K,{icon:"📊",title:"آماده برای اسکن",description:"نمادها و بازه‌های زمانی را انتخاب کنید و دکمه اسکن را بزنید"}),!t.isScanning&&!t.error&&t.hasScanned&&x.length===0&&e.jsx(K,{icon:"🔍",title:"نتیجه‌ای یافت نشد",description:"با معیارهای انتخاب شده، فرصتی شناسایی نشد. فیلترها را تغییر دهید یا نمادهای بیشتری امتحان کنید"}),!t.isScanning&&!t.error&&x.length>0&&e.jsxs(e.Fragment,{children:[t.viewMode==="list"&&e.jsx(Wt,{results:x,selectedSymbols:t.selectedSymbols,onToggleSelection:D}),t.viewMode==="grid"&&e.jsx(Vt,{results:x,selectedSymbols:t.selectedSymbols,onToggleSelection:D}),t.viewMode==="chart"&&e.jsx(qt,{results:x}),t.viewMode==="heatmap"&&e.jsx(Xt,{results:x})]})]}),t.showComparison&&t.selectedSymbols.size>0&&e.jsx(Jt,{symbols:Array.from(t.selectedSymbols),results:x.filter(u=>t.selectedSymbols.has(u.symbol)),onClose:()=>a(u=>({...u,showComparison:!1}))}),e.jsx(Yt,{isOpen:n,onClose:()=>i(!1)}),e.jsx(Qt,{isOpen:c,onClose:()=>r(!1),onRestore:u=>{a(b=>({...b,symbols:u.symbols,timeframes:u.timeframes}))}})]})})};export{ss as default};
